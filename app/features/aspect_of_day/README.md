## üåü –ê—Å–ø–µ–∫—Ç –¥–Ω—è

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–∞–º–æ–≥–æ –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω–æ–≥–æ –∞—Å–ø–µ–∫—Ç–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å.
- –§–æ—Ä–º–∞—Ç: –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç (free) + —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π —Å–æ–≤–µ—Ç (premium).
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–æ–≤–ª–µ—á–µ–Ω–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. `AspectOfDayService` –±–µ—Ä—ë—Ç –ø–æ–∑–∏—Ü–∏–∏ –ø–ª–∞–Ω–µ—Ç (`ephemeris_service.get_ephemeris`) –Ω–∞ 12:00 –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–Ω—è.
2. –î–ª—è –≤—Å–µ—Ö –ø–∞—Ä –ø–ª–∞–Ω–µ—Ç –≤—ã—á–∏—Å–ª—è–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã (—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —Å–µ–∫—Å—Ç–∏–ª—å, –∫–≤–∞–¥—Ä–∞—Ç, —Ç—Ä–∏–≥–æ–Ω, –æ–ø–ø–æ–∑–∏—Ü–∏—è).
3. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ—Ä–± –∏ –≤–µ—Å, –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–ø-–∞—Å–ø–µ–∫—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –≥–ª–∞–≤–Ω—ã–π –¥–ª—è free, –¥–≤–∞ ‚Äî –¥–ª—è premium).
4. –¢–µ–∫—Å—Ç—ã –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∏–∑ `data/transit_templates.json` (—Ç–µ –∂–µ —à–∞–±–ª–æ–Ω—ã, —á—Ç–æ –∏ –¥–ª—è –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã –¥–Ω—è).
5. –ö–æ–º–∞–Ω–¥–∞ `/aspect_of_day` / –∫–Ω–æ–ø–∫–∞ ¬´üåü –ê—Å–ø–µ–∫—Ç –¥–Ω—è¬ª –≤—ã–∑—ã–≤–∞–µ—Ç –≤—ã–≤–æ–¥.
6. –î–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–º–æ-CTA `MessagesData.ASPECT_OF_DAY_PREMIUM_PROMO`.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
- `app/shared/astro/aspect_of_day.py` ‚Äî —Ä–∞—Å—á—ë—Ç –∞—Å–ø–µ–∫—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞.
- `app/features/aspect_of_day/router.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã, –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (free/premium).
- `app/shared/messages.py` ‚Äî —Ç–µ–∫—Å—Ç—ã –∏ CTA.
- `app/shared/keyboards/main.py` ‚Äî –∫–Ω–æ–ø–∫–∞ –≤ –º–µ–Ω—é.

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞
```
üåü –°–æ–ª–Ω—Ü–µ –∫–≤–∞–¥—Ä–∞—Ç –ú–∞—Ä—Å
–î–µ–Ω—å –ø—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—Ç –Ω–∞ –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã. –ù–µ —Å–ø–µ—à–∏—Ç–µ –æ—Ç–≤–µ—á–∞—Ç—å –∏ –¥–µ–ª–∞–π—Ç–µ –ø–∞—É–∑—ã.
–°–æ–≤–µ—Ç: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å—Ç–µ —ç–Ω–µ—Ä–≥–∏—é –≤ —Å–ø–æ—Ä—Ç –∏–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–µ–ª–∞.
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Å–ø–µ–∫—Ç–æ–≤ –¥–ª—è premium –º–æ–∂–Ω–æ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤ `aspect_of_day_service.get_top(..., count=2)`.
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —á–µ—Ä–µ–∑ `NotificationScheduler` (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥–∞).
- –î–ª—è –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ ‚Äî —Ä–∞—Å—à–∏—Ä–∏—Ç—å —à–∞–±–ª–æ–Ω—ã –≤ `data/transit_templates.json`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞
```
/aspect_of_day

python - <<'PY'
from datetime import date
from app.shared.astro import aspect_of_day_service
print(aspect_of_day_service.format_message(aspect_of_day_service.get_top(date.today()), False))
PY
```
